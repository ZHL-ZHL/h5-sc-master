webpackJsonp([5],{"7KPt":function(t,e){},CJWy:function(t,e){},dDHZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Xxa5"),i=n.n(s),r=n("exGp"),a=n.n(r),o=(n("NC6I"),{props:{id:0,mid:0},data:function(){return{list:[],current_index:0,letter:["A","B","C","D","E","F","G","H"],length:0,pecent:0,show:!1,finish:!1,result:{member_test_question_id:0,option_list:[{question_item_id:0,question_item_option_id:0}]}}},methods:{back:function(){var t=this;this.$dialog.confirm({cancelButtonText:"X",message:"退出后将清空本次操作!"}).then(function(){t.$router.push({name:"my"})}).catch(function(){})},select:function(t,e,n){var s=this;return a()(i.a.mark(function r(){return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(console.log(s.result),!s.finish){i.next=3;break}return i.abrupt("return");case 3:if(s.list[e].selectIndex=n,console.log(s.list),s.result.option_list[s.current_index].question_item_id=s.list[s.current_index].id,s.result.option_list[s.current_index].question_item_option_id=t.id,s.pecent++,s.current_index+1!=s.length){i.next=17;break}return s.show=!0,s.finish=!0,i.next=13,s.addResult();case 13:200==i.sent.code&&s.$router.push({name:"share",params:{id:s.id,mid:s.mid}}),i.next=18;break;case 17:s.current_index++;case 18:case"end":return i.stop()}},r,s)}))()},addResult:function(){var t=this;return a()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("test/question//result/create",t.result);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,t)}))()},getData:function(){var t=this;return a()(i.a.mark(function e(){var n,s,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("test/question/"+t.id);case 2:n=e.sent,console.log(n),200==n.code?(s=(s=n.data.item_list).map(function(t){return t.selectIndex=-1,t}),t.list=s,t.result.member_test_question_id=t.mid,t.length=t.list.length,t.result.option_list=Array(t.length).fill({}),t.result.option_list=t.result.option_list.map(function(t){return{question_item_id:0,question_item_option_id:0}})):(r="请先购买该测试题",40030==n.code&&(r="您已答过该测试题"),t.$dialog.alert({message:r}).then(function(){t.$router.push({name:"main"})}));case 5:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.getData()}}),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-test"},[n("div",{staticClass:"back",attrs:{tag:"div"},on:{click:t.back}}),t._v(" "),n("div",{staticClass:"title"},[t._v("测试大厅")]),t._v(" "),t.length?n("van-progress",{attrs:{percentage:(t.pecent/t.length*100).toFixed(0),"stroke-width":"8","pivot-color":"#7232dd",color:"linear-gradient(to right, #be99ff, #7232dd)"}}):t._e(),t._v(" "),n("div",{staticClass:"info"},[n("span",{staticClass:"all"},[n("span",{staticClass:"left"},[t._v("\n          第\n          "),n("span",{staticClass:"index"},[t._v(t._s(t.current_index+1))]),t._v("题\n        ")]),t._v("\n        /共"+t._s(t.length)+"题目\n      ")])]),t._v(" "),t.list[t.current_index]?n("div",{staticClass:"question"},[t._v(t._s(t.list[t.current_index].name))]):t._e(),t._v(" "),t.list[t.current_index]?n("div",{staticClass:"box"},[t._l(t.list[t.current_index].option_list,function(e,s){return n("div",{key:s,staticClass:"ans",on:{click:function(n){return t.select(e,t.current_index,s)}}},[n("div",{staticClass:"option",class:{on:s==t.list[t.current_index].selectIndex}},[n("span",[t._v(t._s(t.letter[s]))])]),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"button",class:{on:s==t.list[t.current_index].selectIndex}})])}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.current_index>0,expression:"current_index>0"}],staticClass:"pre",on:{click:function(e){t.current_index--&&t.pecent--}}},[t._v("上一题")]),t._v(" "),n("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{color:"#7334d4",size:"3.5rem",vertical:!0}},[t._v("正在计算测试结果...")])],2):t._e()],1)},staticRenderFns:[]};var u=n("VU/8")(o,c,!1,function(t){n("CJWy"),n("7KPt")},"data-v-97af469e",null);e.default=u.exports}});
//# sourceMappingURL=5.7b31a0bb435179662201.js.map
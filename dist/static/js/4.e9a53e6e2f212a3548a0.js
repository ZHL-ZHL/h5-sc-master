webpackJsonp([4],{HsEn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Gu7T"),i=a.n(n),s=a("mvHQ"),r=a.n(s),o=a("Xxa5"),c=a.n(o),u=a("exGp"),p=a.n(u),_=a("TVmP"),d=a("934N"),l={props:{status:{type:Number,default:1}},data:function(){return{info:{},list:[],page_index:1,page_size:5,loading:!1,finished:!1,firstLoad:!0,count:0,show:!1,current_index:0,packet_key_list:["vip_month","vip_year","vip_life"]}},computed:{titName:function(){return 0==this.status?"已购买的测试题":2==this.status?"历史测试结果":void 0},avatar:function(){return localStorage.getItem("avatar")},nickname:function(){return localStorage.getItem("nickname")},level:function(){return localStorage.getItem("level")}},components:{Footer:_.a,Totop:d.a},mounted:function(){this.getList(),this.firstLoad=!1},methods:{ali_pay:function(){var t=this;return p()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pop_show=!0,t.show=!1,e.next=4,t.$http.post("pay/alipay/wappay",{number:1,package_key:t.packet_key_list[t.current_index],package_type:0,platform_id:0,total_fee:1});case 4:200==(a=e.sent).code&&(t.form=a.data.form,t.uuid=a.data.uuid,t.$nextTick(function(t){document.querySelector("input[type=submit]").click()})),console.log(a.data);case 7:case"end":return e.stop()}},e,t)}))()},weixin_pay:function(){var t=this;return p()(c.a.mark(function e(){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("pay/wxpay/jsapi_prepay",{number:1,package_key:t.packet_key_list[t.current_index],package_type:0,platform_id:0,total_fee:1});case 2:a=e.sent,n=a.data,t.uuid=a.data.uuid,WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:n.app_id,timeStamp:n.time_stamp,nonceStr:n.nonce_str,package:n.packages,signType:n.sign_type,paySign:n.pay_sign},function(t){alert(r()(t)),"get_brand_wcpay_request:ok"==t.err_msg&&alert("支付回调")}),console.log(a);case 7:case"end":return e.stop()}},e,t)}))()},toVipPage:function(){this.$router.push({name:"buyVIP"})},logout:function(){this.$dialog.confirm({cancelButtonText:"X",message:"确定要退出？"}).then(function(){}).catch(function(){})},getList:function(){var t=this;return p()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("test/question/paid/page",{params:{page_index:t.page_index,page_size:t.page_size,evaluation_status:2}});case 2:a=e.sent,t.page_index++,t.list=[].concat(i()(t.list),i()(a.data.result)),t.count=a.data.total_count,t.loading=!1,t.list.length>=t.count&&(t.finished=!0),console.log(a.data);case 9:case"end":return e.stop()}},e,t)}))()}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-my"},[a("router-link",{staticClass:"back",attrs:{tag:"div",to:{name:"my2"}}}),t._v(" "),a("div",{staticClass:"title"},[t._v("\n      "+t._s(t.titName)+"\n    ")]),t._v(" "),a("Totop"),t._v(" "),a("div",{staticClass:"card-list"},[t.list.length>0||t.firstLoad?a("van-list",{staticClass:"card-list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,n){return a("div",{key:n,staticClass:"card"},[a("div",{staticClass:"top"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"price"},[a("span",{staticClass:"new"},[t._v("¥ "+t._s(t._f("cy")(e.paid_price)))]),t._v(" "),a("span",{staticClass:"old"},[t._v("¥"+t._s(t._f("cy")(e.origin_price)))])]),t._v(" "),a("div",{staticClass:"time"},[t._v("完成时间: "+t._s(t._f("dd")(e.finished_at)))]),t._v(" "),a("div",{staticClass:"number"},[t._v("订单标号: "+t._s(e.out_trade_no))])]),t._v(" "),2==e.evaluation_status?a("div",{staticClass:"bottom",on:{click:function(a){return t.$router.push({name:"share",params:{id:e.question_id,mid:e.member_test_question_id}})}}},[t._v("查看报告")]):t._e(),t._v(" "),0==e.evaluation_status?a("div",{staticClass:"bottom",on:{click:function(a){return t.$router.push({name:"test",params:{id:e.question_id,mid:e.member_test_question_id}})}}},[t._v("去测试")]):t._e()])}),0):t._e()],1)],1),t._v(" "),a("Footer")],1)},staticRenderFns:[]};var v=a("VU/8")(l,f,!1,function(t){a("W5Y5")},"data-v-09eed4cc",null);e.default=v.exports},W5Y5:function(t,e){},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var n=a("FeBl"),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=4.e9a53e6e2f212a3548a0.js.map
webpackJsonp([3],{"6v0Z":function(t,e){},"6wMn":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Gu7T"),n=a.n(i),s=a("mvHQ"),o=a.n(s),c=a("Xxa5"),r=a.n(c),l=a("exGp"),_=a.n(l),u=a("TVmP"),p=a("934N"),v={data:function(){return{info:{},list:[],page_index:1,page_size:5,loading:!1,finished:!1,firstLoad:!0,count:0,show:!1,current_index:0,packet_key_list:["vip_month","vip_year","vip_life"]}},computed:{isweixin:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},avatar:function(){return localStorage.getItem("avatar")},nickname:function(){return localStorage.getItem("nickname")},vip_end_time:function(){return localStorage.getItem("vip_end_time")},level:function(){return localStorage.getItem("level")}},components:{Footer:u.a,Totop:p.a},mounted:function(){this.getList(),this.firstLoad=!1},methods:{ali_pay:function(){var t=this;return _()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pop_show=!0,t.show=!1,e.next=4,t.$http.post("pay/alipay/wappay",{number:1,package_key:t.packet_key_list[t.current_index],package_type:0,platform_id:0,total_fee:1});case 4:200==(a=e.sent).code&&(t.form=a.data.form,t.uuid=a.data.uuid,t.$nextTick(function(t){document.querySelector("input[type=submit]").click()})),console.log(a.data);case 7:case"end":return e.stop()}},e,t)}))()},weixin_pay:function(){var t=this;return _()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("pay/wxpay/jsapi_prepay",{number:1,package_key:t.packet_key_list[t.current_index],package_type:0,platform_id:0,total_fee:1});case 2:a=e.sent,i=a.data,t.uuid=a.data.uuid,WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:i.app_id,timeStamp:i.time_stamp,nonceStr:i.nonce_str,package:i.packages,signType:i.sign_type,paySign:i.pay_sign},function(t){alert(o()(t)),"get_brand_wcpay_request:ok"==t.err_msg&&alert("支付回调")}),console.log(a);case 7:case"end":return e.stop()}},e,t)}))()},toVipPage:function(){this.$router.push({name:"buyVIP"})},logout:function(){var t=this;this.$dialog.confirm({cancelButtonText:"X",message:"确定要退出？"}).then(function(){localStorage.setItem("nickname",""),localStorage.setItem("gender",""),localStorage.setItem("mobile",""),localStorage.setItem("email",""),localStorage.setItem("avatar",""),localStorage.setItem("level",""),localStorage.setItem("token",""),localStorage.setItem("vip_end_time",""),t.$router.push({name:"login"})}).catch(function(){})},getList:function(){var t=this;return _()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("test/question/paid/page",{params:{page_index:t.page_index,page_size:t.page_size,evaluation_status:""}});case 2:a=e.sent,t.page_index++,t.list=[].concat(n()(t.list),n()(a.data.result)),t.count=a.data.total_count,t.loading=!1,t.list.length>=t.count&&(t.finished=!0),console.log(a.data);case 9:case"end":return e.stop()}},e,t)}))()}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"page-my"},[i("div",{staticClass:"title"},[i("div",{staticClass:"avatar",on:{click:function(e){return t.$router.push({name:"my2"})}}},[t.avatar?i("img",{attrs:{src:t.avatar,alt:""}}):i("img",{attrs:{src:a("zQrT"),alt:""},on:{click:t.toVipPage}})]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"nickname"},[t._v("\n          "+t._s(t.nickname)+"\n          "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isweixin,expression:"!isweixin"}],on:{click:t.logout}},[t._v("[注销]")])]),t._v(" "),i("div",{staticClass:"level"},[t._v("\n          "+t._s(t._f("lv")(t.level))+"\n          "),0==t.level?i("div",{staticClass:"vip",on:{click:t.toVipPage}},[t._v("【开通会员】")]):t._e()]),t._v(" "),0!=t.level?i("div",{staticClass:"vip_end_time"},[t._v("到期时间:"+t._s(t._f("dd")(Number(t.vip_end_time))))]):t._e()])]),t._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"popup"},[i("span",{staticClass:"cha iconfont icon-cha",on:{click:function(e){t.show=!1}}}),t._v(" "),i("div",{staticClass:"vip"},[i("div",{class:{on:0==t.current_index},on:{click:function(e){t.current_index=0}}},[t._v("¥100/月")]),t._v(" "),i("div",{class:{on:1==t.current_index},on:{click:function(e){t.current_index=1}}},[t._v("¥200/年")]),t._v(" "),i("div",{class:{on:2==t.current_index},on:{click:function(e){t.current_index=2}}},[t._v("¥100/永久")])]),t._v(" "),i("div",{staticClass:"item"},[i("span",{staticClass:"left",on:{click:t.ali_pay}},[i("span",{staticClass:"zhifubao"}),t._v(" "),i("span",{staticClass:"name"},[t._v("支付宝")])]),t._v(" "),i("span",{staticClass:"arrow iconfont icon-arrowR"})]),t._v(" "),i("div",{staticClass:"item",on:{click:t.weixin_pay}},[i("span",{staticClass:"left"},[i("span",{staticClass:"weixin"}),t._v(" "),i("span",{staticClass:"name"},[t._v("微信")])]),t._v(" "),i("span",{staticClass:"arrow iconfont icon-arrowR"})])])]),t._v(" "),i("Totop"),t._v(" "),i("div",{staticClass:"card-list"},[t.list.length>0||t.firstLoad?i("van-list",{staticClass:"card-list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,a){return i("div",{key:a,staticClass:"card"},[i("div",{staticClass:"top"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"price"},[i("span",{staticClass:"new"},[t._v("¥ "+t._s(t._f("cy")(e.paid_price)))]),t._v(" "),i("span",{staticClass:"old"},[t._v("¥"+t._s(t._f("cy")(e.origin_price)))])]),t._v(" "),i("div",{staticClass:"time"},[t._v("完成时间: "+t._s(t._f("dd")(e.finished_at)))]),t._v(" "),i("div",{staticClass:"number"},[t._v("订单标号: "+t._s(e.out_trade_no))])]),t._v(" "),2==e.evaluation_status?i("div",{staticClass:"bottom",on:{click:function(a){return t.$router.push({name:"share",params:{id:e.question_id,mid:e.member_test_question_id}})}}},[t._v("查看报告")]):t._e(),t._v(" "),0==e.evaluation_status?i("div",{staticClass:"bottom",on:{click:function(a){return t.$router.push({name:"test",params:{id:e.question_id,mid:e.member_test_question_id}})}}},[t._v("去测试")]):t._e()])}),0):t._e()],1)],1),t._v(" "),i("Footer")],1)},staticRenderFns:[]};var m=a("VU/8")(v,d,!1,function(t){a("6v0Z")},"data-v-fafcf662",null);e.default=m.exports},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var i=a("FeBl"),n=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}}});
//# sourceMappingURL=3.6aded46303e3d5d52095.js.map
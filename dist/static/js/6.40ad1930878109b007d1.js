webpackJsonp([6],{EJg2:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Xxa5"),a=s.n(i),n=s("Gu7T"),r=s.n(n),c=s("exGp"),o=s.n(c),d=(s("NC6I"),s("TVmP")),l={props:{loaded:{type:Boolean},list:Array},data:function(){return{msg:"Welcome to Your Vue.js App"}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return!this.list.length&&this.loaded?e("div",{staticClass:"blank"},[e("div",{staticClass:"blank-img"}),this._v(" "),e("div",{staticClass:"blank-txt"},[this._v("暂无数据")])]):this._e()},staticRenderFns:[]};var _=s("VU/8")(l,u,!1,function(t){s("T8Di")},"data-v-52eb0c79",null).exports,h=s("934N"),v=s("mtWM"),p=s.n(v),g={data:function(){return{page_size:3,page_index:1,order_by:1,order_type:"DESC",category_id:"",keyword:"",list:[],count:0,loading:!1,finished:!1,categories:[],cate_index:-1,order_index:1,firstLoad:!0,cancelRequest:null,searchWithKeyword:!1,loaded:!1}},components:{Footer:d.a,Blank:_,Totop:h.a},methods:{getDetail:function(t){this.$router.push({name:"detail",params:{id:t.id}})},getTestList:function(){var t=this;return o()(a.a.mark(function e(){var s,i,n,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.loaded=!1,t.cancelRequest&&t.cancelRequest(),s="",t.searchWithKeyword&&(s=t.keyword,t.searchWithKeyword=!1),i=p.a.CancelToken,e.next=8,t.$http.get("test/question/page",{cancelToken:new i(function(e){t.cancelRequest=e}),params:{page_index:t.page_index,page_size:t.page_size,order_by:t.order_by,order_type:t.order_type,category_id:t.category_id,keyword:s}});case 8:n=e.sent,t.page_index++,c=n.data.result,t.loaded=!0,c&&(c.map(function(t,e){var s=t.image_list.find(function(t){return 0==t.type});return t.pic=s.url,t}),t.list=[].concat(r()(t.list),r()(c))),t.count=n.data.total_count,t.loading=!1,t.list.length>=t.count&&(t.finished=!0),console.log(n);case 17:case"end":return e.stop()}},e,t)}))()},getCategories:function(){var t=this;return o()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("test/category/page",{params:{page_index:1,page_size:100}});case 2:s=e.sent,console.log(s),t.categories=s.data.result;case 5:case"end":return e.stop()}},e,t)}))()},search:function(t,e){this.cate_index=e,this.category_id=t.id,this.list=[],this.page_index=1,this.count=0,this.finished=!1,this.getTestList()},searchByOrder:function(t){this.order_index=t,this.order_by=t,this.list=[],this.page_index=1,this.count=0,this.finished=!1,this.getTestList()},searchByKeyword:function(){this.list=[],this.page_index=1,this.count=0,this.finished=!1,this.searchWithKeyword=!0,this.getTestList()},searchAll:function(t,e){this.cate_index=-1,this.category_id="",this.list=[],this.page_index=1,this.count=0,this.finished=!1,this.getTestList()}},mounted:function(){this.getCategories(),this.firstLoad=!1,this.getTestList()}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-cate"},[s("div",{staticClass:"search"},[s("div",{staticClass:"input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{placeholder:"请输入您要搜索的内容",type:"text"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"iconfont icon--search1 search-icon",on:{click:t.searchByKeyword}})]),t._v(" "),s("div",{staticClass:"nav-bar"},[s("div",{staticClass:"nav-list"},[s("div",{staticClass:"item",class:{on:-1==t.cate_index},on:{click:t.searchAll}},[t._v("全部")]),t._v(" "),t._l(t.categories,function(e,i){return s("div",{key:i,staticClass:"item",class:{on:t.cate_index==i},on:{click:function(s){return t.search(e,i)}}},[t._v(t._s(e.name))])})],2)]),t._v(" "),s("div",{staticClass:"sort"},[s("span",{class:{active:0==t.order_index},on:{click:function(e){return t.searchByOrder(0)}}},[t._v("综合排序")]),t._v(" "),s("span",{class:{active:1==t.order_index},on:{click:function(e){return t.searchByOrder(1)}}},[t._v("按时间")]),t._v(" "),s("span",{class:{active:2==t.order_index},on:{click:function(e){return t.searchByOrder(2)}}},[t._v("按热度")])]),t._v(" "),s("div",[s("van-list",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count>0"}],staticClass:"card-list",attrs:{finished:t.finished,"finished-text":"没有更多了",offset:"5"},on:{load:t.getTestList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,i){return s("div",{key:i,staticClass:"item",on:{click:function(s){return t.getDetail(e)}}},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"cate"},[t._v(t._s(e.category_name))]),t._v(" "),s("div",{staticClass:"price"},[s("span",{staticClass:"new"},[t._v("¥ "+t._s(t._f("cy")(e.present_price)))]),t._v(" "),s("span",{staticClass:"old"},[t._v("¥"+t._s(t._f("cy")(e.origin_price)))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(e.test_number)+"已测")])])]),t._v(" "),s("div",{staticClass:"right"},[s("img",{attrs:{src:e.pic,alt:""}})])])}),0)],1),t._v(" "),s("Totop"),t._v(" "),s("Blank",{attrs:{list:t.list,loaded:t.loaded}})],1),t._v(" "),s("Footer")],1)},staticRenderFns:[]};var y=s("VU/8")(g,f,!1,function(t){s("tioO")},"data-v-76f542ae",null);e.default=y.exports},T8Di:function(t,e){},tioO:function(t,e){}});
//# sourceMappingURL=6.40ad1930878109b007d1.js.map
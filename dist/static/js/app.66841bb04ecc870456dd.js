webpackJsonp([15],{"/wAz":function(e,t){},"4ml/":function(e,t){},"6L0m":function(e,t){},BUlX:function(e,t){},BpKH:function(e,t){},FHgl:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},r,!1,function(e){n("FHgl")},null,null).exports,i=n("7QTg"),c=n.n(i),u=(n("BpKH"),n("/ocq"));a.default.use(u.a);var l=new u.a({routes:[{path:"/",name:"main",component:function(e){return Promise.all([n.e(0),n.e(7)]).then(function(){var t=[n("VZrM")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/test/:id/:mid",name:"test",props:!0,component:function(e){return Promise.all([n.e(0),n.e(5)]).then(function(){var t=[n("dDHZ")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/detail/:id/:mid?",name:"detail",props:!0,component:function(e){return Promise.all([n.e(0),n.e(8)]).then(function(){var t=[n("/pee")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/buyVIP",name:"buyVIP",component:function(e){return Promise.all([n.e(0),n.e(10)]).then(function(){var t=[n("emDE")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/testResult/:status",name:"testResult",props:!0,component:function(e){return Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("HsEn")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/cate",name:"cate",component:function(e){return Promise.all([n.e(0),n.e(6)]).then(function(){var t=[n("EJg2")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/tips/:id?/:mid?",name:"tips",props:!0,component:function(e){return Promise.all([n.e(0),n.e(12)]).then(function(){var t=[n("DFZR")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/share/:id/:mid",name:"share",props:!0,component:function(e){return Promise.all([n.e(0),n.e(1)]).then(function(){var t=[n("OmUJ")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/my",name:"my",component:function(e){return Promise.all([n.e(0),n.e(3)]).then(function(){var t=[n("6wMn")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/my2",name:"my2",component:function(e){return Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("RyLf")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/login",name:"login",component:function(e){return Promise.all([n.e(0),n.e(9)]).then(function(){var t=[n("lmfZ")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/wlogin",name:"wlogin",component:function(e){return Promise.all([n.e(0),n.e(13)]).then(function(){var t=[n("N1If")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/bindPhone/:openid",name:"bindPhone",props:!0,component:function(e){return Promise.all([n.e(0),n.e(11)]).then(function(){var t=[n("Wg+5")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],linkActiveClass:"on"}),s=(n("sVYa"),n("/wAz"),n("6L0m"),n("BUlX"),n("VaBq"),n("Fd2+")),p=(n("4ml/"),n("//Fk")),h=n.n(p),m=n("mtWM"),f=n.n(m).a.create({baseURL:"https://www.morninghappy.cn/mh-mall-web-api/"});f.interceptors.request.use(function(e){return localStorage.getItem("token")&&(e.headers.token=localStorage.getItem("token")),e},function(e){return h.a.reject(e)}),f.interceptors.response.use(function(e){return e.data},function(e){if("401"==e.response.data.code){console.log(l);var t=new RegExp("(^|&)code=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);if(n&&n[2])return;return localStorage.setItem("url",location.href),"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?l.push("/wlogin"):l.push("/login"),h.a.reject(e)}return e.response.data.message&&(a.default.prototype.$message({type:"error",message:e.response.data.msg}),401===e.response.status&&l.push("/login")),h.a.reject(e)});var d=f,g=n("XLwt"),w=n.n(g),v=/(\d{3})(?=\d)/g;var b,y=n("bOdI"),x=n.n(y),P=n("Xxa5"),k=n.n(P),I=n("exGp"),D=n.n(I),R={created:function(){var e=this;return D()(k.a.mark(function t(){var n,a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.getUrlParam("code"))){t.next=10;break}return t.next=4,e.getOpenid(n);case 4:return a=t.sent,t.next=7,e.wLongin(a);case 7:t.sent,t.next=10;break;case 10:case"end":return t.stop()}},t,e)}))()},methods:(b={getUrlParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},getOpenid:function(e){var t=this;return D()(k.a.mark(function n(){var a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("auth/wx/openid/"+e);case 2:return a=n.sent,n.abrupt("return",a.data.open_id);case 4:case"end":return n.stop()}},n,t)}))()},wLongin:function(e){var t=this;return D()(k.a.mark(function n(){var a,r;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$http.post("auth/wx/login/"+e);case 2:if(40008!=(a=n.sent).code){n.next=7;break}t.$router.push({name:"bindPhone",params:{openid:e}}),n.next=17;break;case 7:if(200!=a.code){n.next=16;break}return localStorage.setItem("token",a.data.token),n.next=11,t.$http.get("auth/info");case 11:200==(r=n.sent).code&&(localStorage.setItem("nickname",r.data.nickname),localStorage.setItem("gender",r.data.gender),localStorage.setItem("avatar",r.data.avatar),localStorage.setItem("level",r.data.level)),url?window.location.href=localStorage.getItem("url"):t.$router.push({name:"main"}),n.next=17;break;case 16:alert(a.msg);case 17:case"end":return n.stop()}},n,t)}))()}},x()(b,"getUrlParam",function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}),x()(b,"getRequest",function(){window.location.href.replace(/[/]/g,"%2f").replace(/[:]/g,"%3a").replace(/[#]/g,"%23").replace(/[&]/g,"%26").replace(/[=]/g,"%3d");var e="https://www.morninghappy.cn/mh-mall-web-api/auth/wx/receive_code";e=location.href,e=localStorage.getItem("url"),console.log(e),e=encodeURIComponent(e),console.log(e);var t="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxb3f4414e7bfb9c9e&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect";return window.location.href=t,t}),x()(b,"wechateLogin",function(){var e=this;return D()(k.a.mark(function t(){var n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getRequest(),console.log(n);case 2:case"end":return t.stop()}},t,e)}))()}),b)};a.default.use(c.a),a.default.config.productionTip=!1,a.default.use(s.b),a.default.prototype.$http=d,a.default.prototype.$echarts=w.a,a.default.filter("cy",function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"",n=null!=n?n:2;var a=Math.abs(e).toFixed(n),r=n?a.slice(0,-1-n):a,o=r.length%3,i=o>0?r.slice(0,o)+(r.length>3?",":""):"",c=n?a.slice(-1-n):"";return(e<0?"-":"")+t+i+r.slice(o).replace(v,"1,")+c}),a.default.filter("lv",function(e){return["普通用户","包月会员","年费会员","终生会员"][e]}),a.default.filter("dd",function(e){var t=e?new Date(e):new Date;return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()}),a.default.filter("mDate",function(e){var t=e?new Date(e):new Date,n=t.getHours()<10?"0":"",a=t.getMinutes()<10?"0":"";return n+t.getHours()+":"+(a+t.getMinutes())}),a.default.filter("myDate",function(e){return"星期"+(e?new Date(e):new Date).getDay()}),a.default.mixin(R),new a.default({el:"#app",router:l,components:{App:o},template:"<App/>"})},VaBq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.66841bb04ecc870456dd.js.map